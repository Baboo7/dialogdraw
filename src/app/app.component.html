<ngx-graph
  class="chart-container"
  [view]="view"
  [links]="links"
  [nodes]="nodes"
  [curve]="curve"
  [autoZoom]="autoZoom"
  [autoCenter]="autoCenter"
>

  <ng-template #defsTemplate>
    <svg:marker id="arrow" viewBox="0 -5 10 10" refX="8" refY="0" markerWidth="4" markerHeight="4" orient="auto">
      <svg:path d="M0,-5L10,0L0,5" class="arrow-head" />
    </svg:marker>
  </ng-template>

  <ng-template #nodeTemplate let-node>
    <svg:g class="node">
      <svg:rect 
        [attr.width]="node.width + 50"
        [attr.height]="node.height + 20"
        rx="5"
        ry="5"
        fill="#EEEEEE"
        stroke="#DDDDDD"
        stroke-width="3"
      />

      <!-- Pen -->
      <svg
        class="node-menu node-menu-item"
        viewBox="0 0 24 24"
        width="24px"
        height="24px"
        [attr.x]="node.width + 15"
        [attr.y]="node.height / 2"
        (click)="renameIntent(node)"
      >
        <svg:rect
          [attr.width]="24"
          [attr.height]="24"
          rx="5"
          ry="5"
          fill="#EEEEEE"
        />
        <path 
          d="M 18.414062 2 C 18.158062 2 17.902031 2.0979687 17.707031 2.2929688 L 15.707031 4.2929688 L 14.292969 5.7070312 L 3 17 L 3 21 L 7 21 L 21.707031 6.2929688 C 22.098031 5.9019687 22.098031 5.2689063 21.707031 4.8789062 L 19.121094 2.2929688 C 18.926094 2.0979687 18.670063 2 18.414062 2 z M 18.414062 4.4140625 L 19.585938 5.5859375 L 18.292969 6.8789062 L 17.121094 5.7070312 L 18.414062 4.4140625 z M 15.707031 7.1210938 L 16.878906 8.2929688 L 6.171875 19 L 5 19 L 5 17.828125 L 15.707031 7.1210938 z"
        />
      </svg>

      <svg:text
        class="node-text"
        alignment-baseline="central"
        text-anchor="middle"
        [attr.x]="(node.width + 40) / 2"
        [attr.y]="(node.height + 20) / 2"
      >{{node.label}}</svg:text>
    </svg:g>
  </ng-template>

  <ng-template #linkTemplate let-link>
    <svg:g class="edge">
      <svg:path
        class="line"
        stroke-width="2"
        marker-end="url(#arrow)" >
      </svg:path>
    </svg:g>
  </ng-template>
</ngx-graph>
